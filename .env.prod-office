# RustDesk Server Configuration - PRODUCTION OFFICE + INDUSTRIAL
# Environnement 1 : Office et Industrial (peuvent cohabiter)
# ~4000 machines

# ============================================================================
# INFORMATIONS RÉSEAU
# ============================================================================

# Domaine du serveur (DNS interne)
SERVER_DOMAIN=rustdesk-office.bh-systems.be

# IP du serveur ID/Rendezvous (hbbs)
HBBS_IP=10.10.0.100

# IP du serveur Relay principal (hbbr)
HBBR_PRIMARY_IP=10.10.0.101

# IP du serveur Relay secondaire (optionnel, pour haute disponibilité)
HBBR_SECONDARY_IP=10.10.0.102

# Relay Server (utilisé dans la config)
RELAY_SERVER=rustdesk-hbbr

# Subnet Docker (doit être unique)
DOCKER_SUBNET=172.21.0.0/24

# ============================================================================
# SÉCURITÉ
# ============================================================================

# Clés secrètes - CHANGEZ CES VALEURS !
# Générer avec: openssl rand -base64 32
POSTGRES_PASSWORD=CHANGE_ME_OFFICE_DB_PASSWORD_$(openssl rand -base64 16)
DB_URL=postgresql://rustdesk_admin:CHANGE_ME_OFFICE_DB_PASSWORD@postgres:5432/rustdesk

# Clés API
API_SECRET_KEY=CHANGE_ME_OFFICE_API_SECRET_$(openssl rand -base64 32)
SESSION_SECRET=CHANGE_ME_OFFICE_SESSION_SECRET_$(openssl rand -base64 32)

# Active Directory / LDAP Configuration
LDAP_ENABLED=true
LDAP_SERVER=ldap://ad-office.bh-systems.be:389
LDAP_BASE_DN=DC=bh-systems,DC=be
LDAP_BIND_DN=CN=RustDesk Service,OU=Service Accounts,DC=bh-systems,DC=be
LDAP_BIND_PASSWORD=CHANGE_ME_LDAP_PASSWORD_OFFICE
LDAP_USER_FILTER=(objectClass=user)
LDAP_GROUP_FILTER=(objectClass=group)

# ============================================================================
# SSL/TLS Configuration
# ============================================================================

SSL_CERT_PATH=./certs/office/fullchain.pem
SSL_KEY_PATH=./certs/office/privkey.pem

# ============================================================================
# EMAIL (Notifications)
# ============================================================================

SMTP_HOST=smtp.bh-systems.be
SMTP_PORT=587
SMTP_USER=rustdesk-office@bh-systems.be
SMTP_PASSWORD=CHANGE_ME_SMTP_PASSWORD
SMTP_FROM=rustdesk-office@bh-systems.be

# ============================================================================
# PERFORMANCE (Office + Industrial ~4000 machines)
# ============================================================================

# Base de données
POSTGRES_DB=rustdesk_office
POSTGRES_USER=rustdesk_admin

# Limites de connexion
MAX_CONNECTIONS=5000
WORKER_PROCESSES=4

# Logging
LOG_LEVEL=info

# ============================================================================
# PORTS
# ============================================================================
# 21115 - hbbs TCP (NAT type test)
# 21116 - hbbs TCP/UDP (ID registration and heartbeat)
# 21117 - hbbr TCP (Relay)
# 21118 - hbbs TCP (Web socket)
# 21119 - hbbr TCP (Web socket)
